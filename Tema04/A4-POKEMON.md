# üì± Pokedex - App Android

> Este proyecto es una adaptaci√≥n de https://coderslink.com/talento/blog/como-consumir-una-api-desde-una-aplicacion-android/

Estamos ocupando la POKEAPI https://pokeapi.co/

## Paso 1 - Crear un Proyecto

Sigue los pasos 1 al 4 del archivo `GIT_BASICO.md` para crear y configurar tu proyecto Android.
Y agrega el men√∫ de dos items.

## Paso 2 ‚Äì Configuraci√≥n inicial

Abre el archivo build.gradle de tu aplicaci√≥n y a√±ade las siguientes dependencias:

```json
dependencies {
    implementation("com.squareup.retrofit2:retrofit:3.0.0")
    implementation("com.squareup.retrofit2:converter-gson:3.0.0")
    implementation("com.google.code.gson:gson:2.13.1")
}
```

> **üí° Tip**: Podr√≠as tener ya la primera l√≠nea y la √∫ltima por lo que s√≥lo tendr√°s que agregar las 3 l√≠neas de implementation al json

Despu√©s de copiar las dependencias, hacer click en el bot√≥n "Synk now" para instalar las dependencias.

Retrofit es un cliente REST extremadamente simple de configurar. Nos permitir√° tratar las llamadas a la API como funciones Java, as√≠ definiremos solamente las URLs que queremos llamar y los tipos de petici√≥n y respuesta que esperamos.

Gson es una librer√≠a de Google muy popular para serializar y de-serializar data entre objetos JSON y objetos Java. As√≠, sin mucho boilerplate, podremos tratar a los datos JSON como clases de Java, pasando de esto:

```json
{
   "count": 1118,
   "results": [
      {
         "name": "bulbasaur",
         "url": "https://pokeapi.co/api/v2/pokemon/1/"
      }
   ]
}
```

A esto:

```java
public class PokemonFetchResults {
    @SerializedName("count")
    @Expose
    private int count;

    @SerializedName("results")
    @Expose
    private ArrayList results;
}
```

Tambi√©n hay que conceder permiso a la app para que se pueda conectar a Internet. Agrega la siguiente l√≠nea a tu AndroidManifest.xml:

```xml
<uses-permission android:name="android.permission.INTERNET"
        tools:ignore="ManifestOrder" />
```

> **üí° Tip**: El archivo AndroidManifest.xml lo encuentran en la carpeta app/manifests y debe de pegarse despu√©s de la etiqueta </application> y antes de la etiqueta </manifest>

---

## Paso 3 ‚Äì Definir Endpoints y Modelos

**Llamadas necesarias:**

-  `GET https://pokeapi.co/api/v2/pokemon?limit=50` ‚Üí obtener los primeros 50 Pok√©mon

```bash
curl --location 'https://pokeapi.co/api/v2/pokemon?limit=2'
```

-  `GET https://pokeapi.co/api/v2/pokemon/{id}` ‚Üí obtener detalles de cada uno

```bash
curl --location 'https://pokeapi.co/api/v2/pokemon/1'
```

> **üí° Tip**: T√∫ puedes validar las llamdas en Postman

### Modelos de Datos

Agregar los archivos:

**Pokemon.java**

```java
public class Pokemon {
    @SerializedName("name")
    @Expose
    private String name;

    @SerializedName("url")
    @Expose
    private String url;

    public String getName() { return name; }
    public void setName(String name) { this.name = name; }
    public String getDescription() { return "It's " + getName() + "!"; }
}
```

**PokemonFetchResults.java**

```java
public class PokemonFetchResults {
    @SerializedName("results")
    @Expose
    private ArrayList<Pokemon> results;

    public ArrayList<Pokemon> getResults() {
        return results;
    }
}
```

> **Nota**: No es necesario definir todos los campos que retorna la API, solo los que necesites.

### Interfaz para la API

Crea un paquete llamado resources.

Crea una nueva interfaz llamada `PokemonAPIService`:

```java
import com.example.pokedex.resources.PokemonFetchResults;
import retrofit2.Call;
import retrofit2.http.GET;

public interface PokemonAPIService {
    @GET("pokemon/?limit=50")
    Call<PokemonFetchResults> getPokemons();
}
```

---

## Paso 4 ‚Äì Integrar Todo en la Vista Principal

En la funci√≥n `onCreate` de `MainActivity` a√±ade:

```java
Retrofit retrofit = new Retrofit.Builder()
    .baseUrl("https://pokeapi.co/api/v2/")
    .addConverterFactory(GsonConverterFactory.create(
        new GsonBuilder().serializeNulls().create()
    ))
    .build();
PokemonAPIService pokemonApiService = retrofit.create(PokemonAPIService.class);
Call<PokemonFetchResults> call = pokemonApiService.getPokemons();
```

## Paso 5 ‚Äì Cambiar el men√∫

El t√≠tulo de la Pantalla de Home tiene que ser Pokedex
El t√≠tulo de cada pantalla debe de tener el nombre del pokemon
Cada men√∫ debe de tener el nombre del pokemon
Cada pantalla debe de mostrar el texto del pokemon
